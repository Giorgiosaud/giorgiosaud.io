---
import { getCollection } from 'astro:content'
import Note from '@components/Note.astro'
import Base from '@templates/Base.astro'
import type { GetStaticPaths } from 'astro'
export const getStaticPaths: GetStaticPaths = async ({ paginate }) => {
  const publishedNotesEntries = await getCollection('notes', ({ data }) => {
    //filter draft props true and published in the future
    return !data.draft && data.publishDate < new Date()
  })
  //sort entries
  publishedNotesEntries.sort(
    (a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf(),
  )

  return paginate(publishedNotesEntries, {
    pageSize: 6,
  })
}

const { page } = Astro.props
---
<Base title='Archive Page' pathToTranslate="notebook">
<h1>Archive Notes page {page.number}</h1>
<ul>
{page.data.map(note=>{
  return <li>
    <Note note={note} />
  </li>
})}
</ul>
</Base>