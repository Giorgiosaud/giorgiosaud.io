---
import DashboardLayout from '@components/dashboard/DashboardLayout.astro'
import ProfileEditor from '@components/dashboard/ProfileEditor.svelte'
import UserStatus from '@components/dashboard/UserStatus.svelte'
import { getLangFromUrl, useTranslations } from '@i18n/utils'

export const prerender = false

const lang = getLangFromUrl(Astro.url)
const t = useTranslations(lang)

const user = Astro.locals.user
---

<DashboardLayout title={t('dashboard.nav.profile')} currentPage="profile">
  <div class="profile-section">
    <ProfileEditor client:load lang={lang} />
  </div>

  <div class="status-preview">
    <UserStatus client:load lang={lang} compact />
  </div>
</DashboardLayout>

<style>
  .profile-section {
    margin-bottom: 2rem;
  }

  .status-preview {
    padding-top: 2rem;
    border-top: 1px solid var(--color-border, #ddd);
  }
</style>
