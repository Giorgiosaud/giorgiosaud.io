---
import { Image } from 'astro:assets'
import Icon from '@components/Icon.astro'
import { getLangFromUrl, useTranslatedPath, useTranslations } from '@i18n/utils'
import HomeNotebook from '@images/home-notebook.webp'

const lang = getLangFromUrl(Astro.url)
const t = useTranslations(lang)
const { translatePath } = useTranslatedPath(lang)
// set props of hero component
interface Props {
  title: string
  description: string
  showButtons?: boolean
}
const { title, description, showButtons = true } = Astro.props
---

<section id="hero" class="hero__container scrolll-animated">
  <div class="hero">
    <!-- Image first in DOM for LCP priority on mobile -->
    <div class="hero__image">
       <Image src={HomeNotebook} alt={title} loading="eager" fetchpriority="high" decoding="sync" />
    </div>
    <h1 class="hero__title">
      {title}
    </h1>
    <p class="hero__description">
      {description}
    </p>
    {showButtons &&(
      <div class="hero__buttons">
        <a
        class="button button-block button-primary"
        
        href={translatePath("notebook", lang)}
        >
        <Icon name="Note" />
        {t("hero.notebook")}
      </a>
      <a
      href="https://github.com/giorgiosaud"
      rel="noopener"
      target="_blank"
      class="button button-block button-outline"
      ><Icon name="GitHub" />
      <span>{t("hero.githubProfileButton")}</span>
    </a>
  </div>
  )}
</div>
</section>
<style>
  .hero__container {
    container: hero/inline-size;
    padding-block: 2lh;
  }
  .hero {
    display: grid;
    grid-template-columns: 1fr;
    /* Mobile: image first (DOM order), then reorder visually */
    grid-template-areas:
      "image"
      "title"
      "description"
      "buttons";
    @container hero (width > 90ch) {
      grid-template-columns: 2fr 1fr;
      grid-template-rows: auto auto auto;
      grid-template-areas:
        "title image"
        "description image"
        "buttons image";
    }
    align-items: center;
    color: var(--color-main);

    .hero__title {
      grid-area: title;
    }
    .hero__description {
      grid-area: description;
      font-size: clamp(0.75rem, 5vw, 1.3rem);
      padding-block: 1lh;
      /* Prevent CLS: reserve space for text with min-height */
      min-height: 8lh;
      @container hero (width > 48ch) {
        min-height: 6lh;
      }
      @container hero (width > 90ch) {
        min-height: 4lh;
      }
    }
    .hero__image {
      grid-area: image;
      margin: auto;
      padding: calc(var(--spacing) * 4);
      place-items: center;
      img{
        border-radius:50%;
        /* Full width on mobile to be larger than text (LCP) */
        width: 100%;
        max-width: 400px;
        aspect-ratio: 1;
        box-shadow: 10px 10px 15px -10px light-dark(var(--color-main),var(--color-light));
      }
      @media (prefers-color-scheme: dark) {
        filter: sepia(1);
      }
    }
    .hero__buttons {
      grid-area: buttons;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: calc(var(--spacing) * 4);
      margin-top: calc(var(--spacing) * 8);
      @container hero (width > 48ch) {
        flex-direction: row;
        justify-content: start;
      }
    }
  }
</style>
