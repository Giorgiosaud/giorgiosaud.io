---
import { SEO, type Props as SEOProps } from "astro-seo";
import Footer from "@components/footer.astro";
import Navbar from "@components/navbar/navbar.astro";
import "@fontsource-variable/inter/index.css";
import { ViewTransitions } from 'astro:transitions';

export interface Props {
  title?: string;
  image?: string;
  description?: string;
  article?:{
    publishedTime?: string;
    modifiedTime?: string;
    expirationTime?: string;
    authors?: string[];
    section?: string;
    tags?: string[];
  }
}

const canonicalURL = new URL(Astro.url.pathname, Astro.site).toString();

const resolvedImageWithDomain = new URL(
"/Innovation-amico.png",
Astro.site
).toString();

const { title, description,image, article } = Astro.props;

const makeDescription= description ?? "A seasoned solution architect sharing practical web development insights and solutions for developers from beginners to experts.";
const seoProps:SEOProps={
  title,
  description: makeDescription,
  titleTemplate:"%s | Giorgiosaud.io",
  titleDefault:"My personal Website",
  charset:"UTF-8",
  canonical:canonicalURL,
  twitter:{
    creator: "@giorgiosaud",
    site: "https://giorgiosaud.io",
    card: "summary_large_image",
  },
  openGraph: {
    basic: {
      url: canonicalURL,
      type: "website",
      title: `Giorgiosaud.io - Astro Notebook`,
      image: image??resolvedImageWithDomain,
    },
    image: {
      alt: title??"Giorgiosaud Screenshot",
    },
    optional: {
      description: description??"my Notebook",
      locale: "en_US",
      siteName: "Giorigosaud Notebook",
    },
  }
}
if(article){
  seoProps.openGraph!.article={
    publishedTime: article.publishedTime,
    modifiedTime: article.modifiedTime,
    section: article.section,
    tags: article.tags,
  }
}
---

<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script type="text/partytown" src="https://www.googletagmanager.com/gtag/js?id=G-MEH65SGCD3"></script>
  <script type="text/partytown">
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    
    gtag('config', 'G-MEH65SGCD3');
  </script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="sitemap" href="/sitemap-index.xml" />
  <meta name="generator" content={Astro.generator} />
  <ViewTransitions />
  
  <!-- <link rel="preload" as="image" href={src} alt="Hero" /> -->
  <SEO
  title={title}
  titleTemplate="%s | Giorgiosaud.io"
  titleDefault="My personal Website"
  charset="UTF-8"
  description={makeDescription}
  canonical={canonicalURL}
  twitter={{
    creator: "@giorgiosaud",
    site: "https://giorgiosaud.io",
    card: "summary_large_image",
  }}
  {...seoProps}
  />
  
</head>
<body>
  <Navbar />
  <slot />
  <Footer />
  <style is:global>
    /* Improve Page speed */
    /* https://css-tricks.com/almanac/properties/c/content-visibility/ */
    img {
      content-visibility: auto;
    }
  </style>
</body>
</html>
